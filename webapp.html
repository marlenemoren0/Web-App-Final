<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Christmas Connect Four</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f2f2f2;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    padding: 20px;
}

h1 {
    color: #b30000;
}

#controls {
    margin-bottom: 10px;
}

#turn {
    font-size: 1.2em;
    margin-bottom: 10px;
}

#board {
    display: grid;
    grid-template-columns: repeat(7, 60px);
    grid-template-rows: repeat(6, 60px);
    gap: 5px;
    background-color: #8b0000; /* Christmas red */
    padding: 10px;
    border-radius: 10px;
}

.cell {
    width: 60px;
    height: 60px;
    background-color: #fff;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: transform 0.2s;
}

.cell:hover {
    transform: scale(1.1);
}

.red { background-color: red; }
.green { background-color: green; }

#message {
    margin-top: 20px;
    font-size: 1.5em;
    color: #006400;
}

button, select {
    margin-top: 10px;
    padding: 8px 12px;
    font-size: 1em;
}
</style>
</head>
<body>

<h1>ðŸŽ„ Christmas Connect Four ðŸŽ„</h1>

<div id="controls">
    <div id="turn">Player 1's turn (Red)</div>
    <button id="playAgain">Play Again</button>
    <label>
        <input type="checkbox" id="aiToggle"> Play with AI
    </label>
    <select id="aiDifficulty">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
    </select>
</div>

<div id="board"></div>
<div id="message"></div>

<a href="index.html">Back to Scratch Page</a>
<script>
const rows = 6;
const cols = 7;
let board = [];
let currentPlayer = 1;
let gameOver = false;
let playWithAI = false;

const boardDiv = document.getElementById('board');
const turnDiv = document.getElementById('turn');
const messageDiv = document.getElementById('message');
const playAgainBtn = document.getElementById('playAgain');
const aiToggle = document.getElementById('aiToggle');
const aiDifficulty = document.getElementById('aiDifficulty');

function createBoard() {
    boardDiv.innerHTML = '';
    board = [];
    for (let r = 0; r < rows; r++) {
        const row = [];
        for (let c = 0; c < cols; c++) {
            const cell = document.createElement('div');
            cell.classList.add('cell');
            cell.dataset.row = r;
            cell.dataset.col = c;
            cell.addEventListener('click', () => handleClick(c));
            boardDiv.appendChild(cell);
            row.push(0);
        }
        board.push(row);
    }
    currentPlayer = 1;
    gameOver = false;
    turnDiv.textContent = "Player 1's turn (Red)";
    messageDiv.textContent = '';
}

function handleClick(col) {
    if (gameOver) return;
    for (let r = rows - 1; r >= 0; r--) {
        if (board[r][col] === 0) {
            board[r][col] = currentPlayer;
            const cellDiv = boardDiv.querySelector(`.cell[data-row='${r}'][data-col='${col}']`);
            cellDiv.classList.add(currentPlayer === 1 ? 'red' : 'green');
            if (checkWin(r, col)) {
                messageDiv.textContent = `Player ${currentPlayer} won! ðŸŽ‰`;
                gameOver = true;
            } else {
                currentPlayer = currentPlayer === 1 ? 2 : 1;
                turnDiv.textContent = `Player ${currentPlayer}'s turn (${currentPlayer === 1 ? 'Red' : 'Green'})`;
                if (playWithAI && currentPlayer === 2) {
                    setTimeout(aiMove, 500);
                }
            }
            break;
        }
    }
}

// Check 4-in-a-row
function checkWin(row, col) {
    const color = board[row][col];
    const directions = [
        { dr: 0, dc: 1 },
        { dr: 1, dc: 0 },
        { dr: 1, dc: 1 },
        { dr: 1, dc: -1 }
    ];
    for (let {dr, dc} of directions) {
        let count = 1;
        let r = row + dr, c = col + dc;
        while (r >= 0 && r < rows && c >= 0 && c < cols && board[r][c] === color) { count++; r+=dr; c+=dc; }
        r = row - dr; c = col - dc;
        while (r >= 0 && r < rows && c >= 0 && c < cols && board[r][c] === color) { count++; r-=dr; c-=dc; }
        if (count >= 4) return true;
    }
    return false;
}

// AI moves
function aiMove() {
    if (gameOver) return;
    let col;
    const difficulty = aiDifficulty.value;
    if (difficulty === 'easy') {
        col = Math.floor(Math.random() * cols);
    } else if (difficulty === 'medium') {
        col = findWinningMove(2) || findWinningMove(1) || Math.floor(Math.random() * cols);
    } else {
        col = findWinningMove(2) || findWinningMove(1) || Math.floor(Math.random() * cols);
    }
    handleClick(col);
}

function findWinningMove(player) {
    for (let c = 0; c < cols; c++) {
        for (let r = rows - 1; r >= 0; r--) {
            if (board[r][c] === 0) {
                board[r][c] = player;
                if (checkWin(r,c)) { board[r][c] = 0; return c; }
                board[r][c] = 0;
                break;
            }
        }
    }
    return null;
}

// Event listeners
playAgainBtn.addEventListener('click', createBoard);
aiToggle.addEventListener('change', () => playWithAI = aiToggle.checked);

// Initialize
createBoard();
</script>

</body>
</html>
